{"componentChunkName":"component---src-templates-blog-post-js","path":"/mt-error/","result":{"data":{"site":{"siteMetadata":{"title":"tateren.github.io"}},"markdownRemark":{"id":"1b5f6d9f-7e91-55b8-9466-c381955c64d2","excerpt":"…","html":"<p>ローカル環境で構築したサイトをエクスポートして別環境にインポートしたところ再構築時に <code class=\"language-text\">Can&#39;t call method &quot;type&quot; on an undefined value</code> というエラーが出るようになった。</p>\n<p>これだけでは何処の何が原因でエラーが発生しているのか分からないので、テンプレートを一つずつ再構築したりテンプレートタグをコメントアウトしてみたりという原始的な方法で原因箇所を特定した。</p>\n<p>結論から言うと <code class=\"language-text\">MTContents</code> タグの <code class=\"language-text\">field:</code> モディファイアにコンテンツフィールドのユニークIDを指定していた事が原因だった。</p>\n<p><a href=\"https://www.movabletype.jp/documentation/appendices/tags/contents.html\">https://www.movabletype.jp/documentation/appendices/tags/contents.html</a></p>\n<blockquote>\n<p>日本語や半角空白が含まれるコンテンツフィールドの場合は、field: の後ろに指定することはできませんのでユニーク ID を代わりに指定します。</p>\n</blockquote>\n<p>とあるが</p>\n<p><a href=\"https://www.movabletype.jp/faq/server-migration.html\">https://www.movabletype.jp/faq/server-migration.html</a></p>\n<blockquote>\n<p>インポートするとサイトの ID やコンテンツタイプのユニーク ID などが変わるため、テンプレート内の ID / ユニーク ID 指定部分があれば書き換える必要があります。</p>\n</blockquote>\n<p>という罠があった。（ちゃんとドキュメント読め）</p>\n<p>回避策として DB を直接 dump &#x26; restore して移行する方法があるが、直接 DB を触れる環境ではなかったので今回は使えなかった。</p>\n<p>今後新しく環境作ったりでインポートする度に変更するのは面倒だしまたハマりそうな気がするので結局今回はフィールド名を英字にする事にした。</p>","frontmatter":{"title":"Movable Type で「Can't call method \"type\" on an undefined value」エラーが発生した時の対処","date":"March 15, 2021","description":"Movable Typeで「Can't call method \"type\" on an undefined value」というエラーが出る原因（の一つ）"}},"previous":{"fields":{"slug":"/pass-stdin-to-container/"},"frontmatter":{"title":"Dockerコンテナに標準入力を渡す"}},"next":{"fields":{"slug":"/vim-quickrun/"},"frontmatter":{"title":"vim-quickrun のデフォルトだったキーマッピングを手動設定する"}}},"pageContext":{"id":"1b5f6d9f-7e91-55b8-9466-c381955c64d2","previousPostId":"4808c7b9-203a-5a3a-9df3-f7ad6feeaea6","nextPostId":"81d3d3bd-f647-5ea7-ba4b-355ab9a27025"}},"staticQueryHashes":["2841359383","916993862"]}